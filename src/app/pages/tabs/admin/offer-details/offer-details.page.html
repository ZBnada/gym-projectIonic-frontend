<ion-header [translucent]="true">
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <ion-button (click)="navigateBack()">
        <ion-icon name="arrow-back-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-title class="gym-title">
      <div class="title-content">
        <div class="logo-section">
          <ion-icon name="barbell" class="title-icon"></ion-icon>
          <span class="gym-name">GYM Pro</span>
        </div>
        <span class="page-title">Détails Offre</span>
      </div>
    </ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="deleteOffer()" fill="clear" class="delete-btn">
        <ion-icon name="trash-outline" slot="icon-only" color="danger"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="details-content">
  <!-- Loading State -->
  @if (isLoading) {
    <div class="loading-container">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Chargement des détails...</p>
    </div>
  }

  <!-- Offer Details -->
  @if (!isLoading && offer) {
    <div class="details-container">
      
      <!-- Header Card -->
      <ion-card class="header-card" [color]="getPlanColor(offer)">
        <ion-card-header>
          <div class="offer-header">
            <div class="offer-badge">
              <ion-badge [color]="getPlanColor(offer)" class="plan-badge">
                {{ getPlanType(offer) }}
              </ion-badge>
            </div>
            <h1 class="offer-title">{{ offer.titre }}</h1>
            <p class="offer-description">{{ offer.description }}</p>
          </div>
        </ion-card-header>

        <ion-card-content>
          <div class="price-section">
            <div class="price-amount">{{ offer.prix }} DT</div>
            <div class="price-period">pour {{ getDurationText(offer.dureeMois) }}</div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Details Cards -->
      <div class="details-grid">
        
        <!-- Duration Card -->
        <ion-card class="detail-card">
          <ion-card-header>
            <div class="card-header">
              <ion-icon name="calendar-outline" class="card-icon" color="primary"></ion-icon>
              <ion-card-title>Durée</ion-card-title>
            </div>
          </ion-card-header>
          <ion-card-content>
            <div class="detail-content">
              <span class="detail-value">{{ getDurationText(offer.dureeMois) }}</span>
              <span class="detail-label">Période d'abonnement</span>
            </div>
          </ion-card-content>
        </ion-card>

        <!-- Price Card -->
        <ion-card class="detail-card">
          <ion-card-header>
            <div class="card-header">
              <ion-icon name="cash-outline" class="card-icon" color="success"></ion-icon>
              <ion-card-title>Prix</ion-card-title>
            </div>
          </ion-card-header>
          <ion-card-content>
            <div class="detail-content">
              <span class="detail-value">{{ offer.prix }} DT</span>
              <span class="detail-label">Prix total</span>
            </div>
          </ion-card-content>
        </ion-card>

        <!-- Features Card -->
        <ion-card class="features-card">
          <ion-card-header>
            <div class="card-header">
              <ion-icon name="checkmark-circle-outline" class="card-icon" color="tertiary"></ion-icon>
              <ion-card-title>Caractéristiques</ion-card-title>
            </div>
          </ion-card-header>
          <ion-card-content>
            <div class="features-list">
              <div class="feature-item">
                <ion-icon name="checkmark-circle-outline" color="success"></ion-icon>
                <span>Accès illimité à la salle</span>
              </div>
              <div class="feature-item">
                <ion-icon name="checkmark-circle-outline" color="success"></ion-icon>
                <span>Équipements premium</span>
              </div>
              <div class="feature-item">
                <ion-icon name="checkmark-circle-outline" color="success"></ion-icon>
                <span>Vestiaires inclus</span>
              </div>
              <div class="feature-item">
                <ion-icon name="checkmark-circle-outline" color="success"></ion-icon>
                <span>Support client</span>
              </div>
              @if (getPlanType(offer) === 'Premium' || getPlanType(offer) === 'Unlimited') {
                <div class="feature-item">
                  <ion-icon name="checkmark-circle-outline" color="success"></ion-icon>
                  <span>Coaching personnel</span>
                </div>
              }
              @if (getPlanType(offer) === 'Unlimited') {
                <div class="feature-item">
                  <ion-icon name="checkmark-circle-outline" color="success"></ion-icon>
                  <span>Accès spa & wellness</span>
                </div>
              }
            </div>
          </ion-card-content>
        </ion-card>

        <!-- Additional Info Card -->
        <ion-card class="info-card">
          <ion-card-header>
            <div class="card-header">
              <ion-icon name="time-outline" class="card-icon" color="warning"></ion-icon>
              <ion-card-title>Informations Supplémentaires</ion-card-title>
            </div>
          </ion-card-header>
          <ion-card-content>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Date de création:</span>
                <span class="info-value">{{ offer.createdAt | date:'dd/MM/yyyy' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Dernière modification:</span>
                <span class="info-value">{{ offer.updatedAt | date:'dd/MM/yyyy' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Statut:</span>
                <span class="info-value status-active">Active</span>
              </div>
            </div>
          </ion-card-content>
        </ion-card>

      </div>
      

    </div>
  }

  <!-- Error State -->
  @if (!isLoading && !offer) {
    <div class="error-container">
      <ion-icon name="warning-outline" class="error-icon"></ion-icon>
      <h3>Offre non trouvée</h3>
      <p>L'offre que vous recherchez n'existe pas ou a été supprimée.</p>
      <ion-button (click)="navigateBack()" fill="solid" color="primary">
        Retour aux offres
      </ion-button>
    </div>
  }

</ion-content>