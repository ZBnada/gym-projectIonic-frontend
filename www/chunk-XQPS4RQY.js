import{P as fe,V as he,a as de,c as ce,l as ue,y as pe,z as ge}from"./chunk-DCD5WIEN.js";import{$ as L,B as g,Ba as c,Ca as R,Da as G,Db as re,Ea as Y,Eb as ae,F as s,Fa as $,Ga as H,H as P,Ib as le,Ja as W,Jb as se,La as J,Lb as me,M as o,N as n,O as d,S as N,T as b,U as v,aa as r,ca as C,da as z,fb as K,gb as Q,ja as q,k as h,ka as B,l as _,ma as j,ob as X,qb as Z,rb as ee,s as V,tb as te,u as a,ua as D,ub as ne,v as k,xb as oe,y as T,yb as ie}from"./chunk-WCEPOSQX.js";import"./chunk-4H3EC2BX.js";import"./chunk-FRZBD6WN.js";import"./chunk-7O4QGFO5.js";import"./chunk-WYZT6OWH.js";import"./chunk-G3CV3VGG.js";import"./chunk-3BG456MW.js";import"./chunk-K6L7EKAC.js";import"./chunk-QYULWRQI.js";import"./chunk-4WFVMWDK.js";import"./chunk-4I6HJA6T.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import{e as U}from"./chunk-JHI3MBHO.js";function _e(i,u){if(i&1&&d(0,"img",45),i&2){let t=v();s("src",t.photoPreview,V)}}function Pe(i,u){i&1&&d(0,"ion-icon",46)}function be(i,u){if(i&1){let t=N();o(0,"ion-button",47),b("click",function(){h(t);let e=v();return _(e.removePhoto())}),d(1,"ion-icon",48),n()}}function ve(i,u){i&1&&(o(0,"div",49),r(1," Le pr\xE9nom est requis "),n())}function Ce(i,u){i&1&&(o(0,"div",49),r(1," Le nom est requis "),n())}function we(i,u){if(i&1&&(o(0,"div",49),r(1),n()),i&2){let t=v();a(),C(" ",t.getEmailErrorMessage()," ")}}function Ee(i,u){i&1&&(o(0,"div",49),r(1," Le num\xE9ro de t\xE9l\xE9phone est requis "),n())}function Me(i,u){if(i&1&&(o(0,"div",49),r(1),n()),i&2){let t=v();a(),C(" ",t.getPasswordErrorMessage()," ")}}function Oe(i,u){if(i&1&&(o(0,"div",49),r(1),n()),i&2){let t=v();a(),C(" ",t.getConfirmPasswordErrorMessage()," ")}}function xe(i,u){if(i&1&&(o(0,"ion-select-option",52),r(1),n()),i&2){let t=u.$implicit;s("value",t.id),a(),z(" ",t.name," - ",t.price,"\u20AC ")}}function Fe(i,u){if(i&1&&(o(0,"ion-item",25)(1,"ion-label",26),r(2,"Offre"),n(),o(3,"ion-select",50),g(4,xe,2,3,"ion-select-option",51),n()()),i&2){let t=v();a(4),s("ngForOf",t.offers)}}function Ie(i,u){i&1&&d(0,"ion-spinner",53)}var ze=(()=>{class i{constructor(t,l){this.formBuilder=t,this.router=l,this.showPassword=!1,this.selectedPhoto=null,this.photoPreview=null,this.isLoading=!1,this.offers=[{id:1,name:"Offre Basique",price:29},{id:2,name:"Offre Premium",price:59},{id:3,name:"Offre Famille",price:99}],de({arrowBackOutline:ce,personOutline:fe,cameraOutline:ue,trashOutline:he,eyeOutline:ge,eyeOffOutline:pe}),this.userForm=this.createForm()}ngOnInit(){this.setupFormListeners()}createForm(){return this.formBuilder.group({firstName:["",[c.required,c.minLength(2)]],lastName:["",[c.required,c.minLength(2)]],email:["",[c.required,c.email]],phone:["",[c.required,c.pattern(/^[0-9]{10}$/)]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",[c.required]],role:["CLIENT",[c.required]],offerId:[null]},{validators:this.passwordMatchValidator})}passwordMatchValidator(t){let l=t.get("password"),e=t.get("confirmPassword");return l&&e&&l.value!==e.value?e.setErrors({passwordMismatch:!0}):e?.setErrors(null),null}setupFormListeners(){this.userForm.get("role")?.valueChanges.subscribe(t=>{t==="ADMIN"?(this.userForm.get("offerId")?.setValue(null),this.userForm.get("offerId")?.clearValidators()):this.userForm.get("offerId")?.setValidators(c.required),this.userForm.get("offerId")?.updateValueAndValidity()})}onFileSelected(t){let l=t.target.files[0];if(l){if(!l.type.startsWith("image/")){this.showError("Veuillez s\xE9lectionner une image valide");return}if(l.size>5*1024*1024){this.showError("L'image ne doit pas d\xE9passer 5MB");return}this.selectedPhoto=l;let e=new FileReader;e.onload=m=>{this.photoPreview=m.target.result},e.readAsDataURL(l)}}removePhoto(){this.selectedPhoto=null,this.photoPreview=null}togglePasswordVisibility(){this.showPassword=!this.showPassword}getEmailErrorMessage(){let t=this.userForm.get("email");return t?.errors?.required?"L'email est requis":t?.errors?.email?"Format d'email invalide":""}getPasswordErrorMessage(){let t=this.userForm.get("password");return t?.errors?.required?"Le mot de passe est requis":t?.errors?.minlength?"Le mot de passe doit contenir au moins 6 caract\xE8res":""}getConfirmPasswordErrorMessage(){let t=this.userForm.get("confirmPassword");return t?.errors?.required?"La confirmation du mot de passe est requise":t?.errors?.passwordMismatch?"Les mots de passe ne correspondent pas":""}addUser(){return U(this,null,function*(){if(this.userForm.valid){this.isLoading=!0;try{let t=new FormData;Object.keys(this.userForm.value).forEach(l=>{this.userForm.value[l]!==null&&t.append(l,this.userForm.value[l].toString())}),this.selectedPhoto&&t.append("photo",this.selectedPhoto),yield this.simulateApiCall(t),this.showSuccess("Utilisateur cr\xE9\xE9 avec succ\xE8s !"),this.router.navigate(["/tabs/admin-dashboard"])}catch(t){this.showError("Erreur lors de la cr\xE9ation de l'utilisateur"),console.error("Error:",t)}finally{this.isLoading=!1}}})}simulateApiCall(t){return new Promise((l,e)=>{setTimeout(()=>{let m={};t.forEach((p,f)=>{m[f]=p}),console.log("Donn\xE9es envoy\xE9es:",m),l({success:!0,message:"Utilisateur cr\xE9\xE9"})},2e3)})}goBack(){this.router.navigate(["/tabs/admin-dashboard"])}showError(t){console.error("Error:",t),alert(t)}showSuccess(t){console.log("Success:",t),alert(t)}static{this.\u0275fac=function(l){return new(l||i)(k(W),k(D))}}static{this.\u0275cmp=T({type:i,selectors:[["app-add-user"]],decls:98,vars:34,consts:[["fileInput",""],[3,"translucent"],["color","dark"],["slot","start"],[3,"click"],["name","arrow-back-outline","slot","icon-only"],[1,"add-user-content",3,"fullscreen"],[1,"container"],[1,"header-section"],[1,"page-title"],[1,"page-subtitle"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"photo-section"],[1,"photo-container"],[1,"photo-preview"],["alt","Photo preview","class","photo-image",3,"src",4,"ngIf"],["name","person-outline","class","photo-placeholder",4,"ngIf"],["type","file","accept","image/*",1,"file-input",3,"change"],["fill","outline","size","small",1,"photo-button",3,"click"],["name","camera-outline","slot","start"],["fill","clear","color","danger","size","small",3,"click",4,"ngIf"],["lines","none",1,"form-list"],[1,"form-section"],[1,"section-title"],[1,"form-item"],["position","stacked",1,"input-label"],[1,"required"],["formControlName","firstName","type","text","placeholder","Entrez le pr\xE9nom",1,"custom-input"],["class","error-message",4,"ngIf"],["formControlName","lastName","type","text","placeholder","Entrez le nom",1,"custom-input"],["formControlName","email","type","email","placeholder","Entrez l'email",1,"custom-input"],["formControlName","phone","type","tel","placeholder","Entrez le num\xE9ro de t\xE9l\xE9phone",1,"custom-input"],["formControlName","password","placeholder","Cr\xE9ez un mot de passe",1,"custom-input",3,"type"],["fill","clear","slot","end",1,"eye-button",3,"click"],[1,"eye-icon",3,"name"],["formControlName","confirmPassword","placeholder","Confirmez le mot de passe",1,"custom-input",3,"type"],["formControlName","role","interface","action-sheet","placeholder","S\xE9lectionnez un r\xF4le",1,"custom-select"],["value","ADMIN"],["value","CLIENT"],["class","form-item",4,"ngIf"],[1,"actions-section"],["expand","block","type","submit",1,"submit-btn",3,"disabled"],["name","crescent","class","spinner",4,"ngIf"],["expand","block","fill","outline","color","medium",1,"cancel-btn",3,"click"],["alt","Photo preview",1,"photo-image",3,"src"],["name","person-outline",1,"photo-placeholder"],["fill","clear","color","danger","size","small",3,"click"],["name","trash-outline"],[1,"error-message"],["formControlName","offerId","interface","action-sheet","placeholder","S\xE9lectionnez une offre",1,"custom-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","crescent",1,"spinner"]],template:function(l,e){if(l&1){let m=N();o(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-buttons",3)(3,"ion-button",4),b("click",function(){return h(m),_(e.goBack())}),d(4,"ion-icon",5),n()(),o(5,"ion-title"),r(6,"Ajouter un Utilisateur"),n()()(),o(7,"ion-content",6)(8,"div",7)(9,"div",8)(10,"h1",9),r(11,"Nouvel Utilisateur"),n(),o(12,"p",10),r(13,"Ajoutez un administrateur ou un client \xE0 votre syst\xE8me"),n()(),o(14,"div",11)(15,"form",12),b("ngSubmit",function(){return h(m),_(e.addUser())}),o(16,"div",13)(17,"div",14)(18,"div",15),g(19,_e,1,1,"img",16)(20,Pe,1,0,"ion-icon",17),n(),o(21,"input",18,0),b("change",function(f){return h(m),_(e.onFileSelected(f))}),n(),o(23,"ion-button",19),b("click",function(){h(m);let f=L(22);return _(f.click())}),d(24,"ion-icon",20),r(25),n(),g(26,be,2,0,"ion-button",21),n()(),o(27,"ion-list",22)(28,"div",23)(29,"h3",24),r(30,"Informations Personnelles"),n(),o(31,"ion-item",25)(32,"ion-label",26),r(33," Pr\xE9nom "),o(34,"span",27),r(35,"*"),n()(),d(36,"ion-input",28),n(),g(37,ve,2,0,"div",29),o(38,"ion-item",25)(39,"ion-label",26),r(40," Nom "),o(41,"span",27),r(42,"*"),n()(),d(43,"ion-input",30),n(),g(44,Ce,2,0,"div",29),o(45,"ion-item",25)(46,"ion-label",26),r(47," Email "),o(48,"span",27),r(49,"*"),n()(),d(50,"ion-input",31),n(),g(51,we,2,1,"div",29),o(52,"ion-item",25)(53,"ion-label",26),r(54," T\xE9l\xE9phone "),o(55,"span",27),r(56,"*"),n()(),d(57,"ion-input",32),n(),g(58,Ee,2,0,"div",29),n(),o(59,"div",23)(60,"h3",24),r(61,"S\xE9curit\xE9"),n(),o(62,"ion-item",25)(63,"ion-label",26),r(64," Mot de passe "),o(65,"span",27),r(66,"*"),n()(),d(67,"ion-input",33),o(68,"ion-button",34),b("click",function(){return h(m),_(e.togglePasswordVisibility())}),d(69,"ion-icon",35),n()(),g(70,Me,2,1,"div",29),o(71,"ion-item",25)(72,"ion-label",26),r(73," Confirmer le mot de passe "),o(74,"span",27),r(75,"*"),n()(),d(76,"ion-input",36),n(),g(77,Oe,2,1,"div",29),n(),o(78,"div",23)(79,"h3",24),r(80,"R\xF4le et Configuration"),n(),o(81,"ion-item",25)(82,"ion-label",26),r(83," R\xF4le "),o(84,"span",27),r(85,"*"),n()(),o(86,"ion-select",37)(87,"ion-select-option",38),r(88,"Administrateur"),n(),o(89,"ion-select-option",39),r(90,"Client"),n()()(),g(91,Fe,5,1,"ion-item",40),n()(),o(92,"div",41)(93,"ion-button",42),g(94,Ie,1,0,"ion-spinner",43),r(95),n(),o(96,"ion-button",44),b("click",function(){return h(m),_(e.goBack())}),r(97," Annuler "),n()()()()()()}if(l&2){let m,p,f,w,E,M,O,x,F,I,y,S,A;s("translucent",!0),a(7),s("fullscreen",!0),a(8),s("formGroup",e.userForm),a(3),P("has-photo",e.selectedPhoto),a(),s("ngIf",e.selectedPhoto),a(),s("ngIf",!e.selectedPhoto),a(5),C(" ",e.selectedPhoto?"Changer":"Ajouter une photo"," "),a(),s("ngIf",e.selectedPhoto),a(10),P("error",((m=e.userForm.get("firstName"))==null?null:m.invalid)&&((m=e.userForm.get("firstName"))==null?null:m.touched)),a(),s("ngIf",((p=e.userForm.get("firstName"))==null?null:p.invalid)&&((p=e.userForm.get("firstName"))==null?null:p.touched)),a(6),P("error",((f=e.userForm.get("lastName"))==null?null:f.invalid)&&((f=e.userForm.get("lastName"))==null?null:f.touched)),a(),s("ngIf",((w=e.userForm.get("lastName"))==null?null:w.invalid)&&((w=e.userForm.get("lastName"))==null?null:w.touched)),a(6),P("error",((E=e.userForm.get("email"))==null?null:E.invalid)&&((E=e.userForm.get("email"))==null?null:E.touched)),a(),s("ngIf",((M=e.userForm.get("email"))==null?null:M.invalid)&&((M=e.userForm.get("email"))==null?null:M.touched)),a(6),P("error",((O=e.userForm.get("phone"))==null?null:O.invalid)&&((O=e.userForm.get("phone"))==null?null:O.touched)),a(),s("ngIf",((x=e.userForm.get("phone"))==null?null:x.invalid)&&((x=e.userForm.get("phone"))==null?null:x.touched)),a(9),P("error",((F=e.userForm.get("password"))==null?null:F.invalid)&&((F=e.userForm.get("password"))==null?null:F.touched)),s("type",e.showPassword?"text":"password"),a(2),s("name",e.showPassword?"eye-off-outline":"eye-outline"),a(),s("ngIf",((I=e.userForm.get("password"))==null?null:I.invalid)&&((I=e.userForm.get("password"))==null?null:I.touched)),a(6),P("error",((y=e.userForm.get("confirmPassword"))==null?null:y.invalid)&&((y=e.userForm.get("confirmPassword"))==null?null:y.touched)),s("type",e.showPassword?"text":"password"),a(),s("ngIf",((S=e.userForm.get("confirmPassword"))==null?null:S.invalid)&&((S=e.userForm.get("confirmPassword"))==null?null:S.touched)),a(14),s("ngIf",((A=e.userForm.get("role"))==null?null:A.value)==="CLIENT"),a(2),s("disabled",!e.userForm.valid||e.isLoading),a(),s("ngIf",e.isLoading),a(),C(" ",e.isLoading?"Cr\xE9ation...":"Cr\xE9er l'utilisateur"," ")}},dependencies:[j,q,B,J,Y,R,G,$,H,Z,ae,re,X,K,le,ne,ee,te,se,me,oe,ie,Q],styles:[".add-user-content[_ngcontent-%COMP%]{--background: #f8f9fa}.container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:1rem}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{color:#1a1a1a;font-weight:700;font-size:2rem;margin-bottom:.5rem}.header-section[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#666;font-size:1rem;margin:0}.form-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 4px 20px #0000001a;margin-bottom:2rem}.photo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.photo-section[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.photo-section[_ngcontent-%COMP%]   .photo-preview[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background:#f0f0f0;display:flex;align-items:center;justify-content:center;border:3px solid #e0e0e0;overflow:hidden;transition:all .3s ease}.photo-section[_ngcontent-%COMP%]   .photo-preview.has-photo[_ngcontent-%COMP%]{border-color:#3880ff}.photo-section[_ngcontent-%COMP%]   .photo-preview[_ngcontent-%COMP%]   .photo-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.photo-section[_ngcontent-%COMP%]   .photo-preview[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]{font-size:3rem;color:#999}.photo-section[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.photo-section[_ngcontent-%COMP%]   .photo-button[_ngcontent-%COMP%]{--border-color: #3880ff;--color: #3880ff}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#1a1a1a;font-weight:600;font-size:1.2rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid #f0f0f0}.form-list[_ngcontent-%COMP%]{background:transparent}.form-item[_ngcontent-%COMP%]{--background: transparent;--padding-start: 0;--inner-padding-end: 0;margin-bottom:1.5rem;--border-color: transparent}.input-label[_ngcontent-%COMP%]{color:#1a1a1a!important;font-weight:600;margin-bottom:.5rem;font-size:.9rem}.input-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#eb445a}.custom-input[_ngcontent-%COMP%]{--background: #f8f9fa;--padding-start: 1rem;--padding-end: 1rem;--padding-top: .8rem;--padding-bottom: .8rem;border-radius:12px;--color: #1a1a1a;font-weight:500;border:2px solid transparent;transition:all .3s ease}.custom-input[_ngcontent-%COMP%]:focus{--background: white;border-color:#3880ff;box-shadow:0 0 0 2px #3880ff1a}.custom-input.error[_ngcontent-%COMP%]{border-color:#eb445a}.custom-select[_ngcontent-%COMP%]{--background: #f8f9fa;--padding-start: 1rem;--padding-end: 1rem;--padding-top: .8rem;--padding-bottom: .8rem;border-radius:12px;--color: #1a1a1a;font-weight:500;border:2px solid transparent;transition:all .3s ease}.custom-select[_ngcontent-%COMP%]:focus{--background: white;border-color:#3880ff}.eye-button[_ngcontent-%COMP%]{--color: #666;margin-right:.5rem}.eye-button[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{font-size:1.2rem}.error-message[_ngcontent-%COMP%]{color:#eb445a;font-size:.8rem;margin-top:.25rem;margin-left:.5rem}.actions-section[_ngcontent-%COMP%]{margin-top:2rem}.actions-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{--background: #3880ff;--background-activated: #2c6cd6;--background-hover: #2c6cd6;--border-radius: 12px;--padding-top: 1rem;--padding-bottom: 1rem;margin-bottom:1rem;font-weight:600;font-size:1rem}.actions-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{--background: #ccc;opacity:.7}.actions-section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{--color: white;margin-right:.5rem}.actions-section[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{--border-radius: 12px;--padding-top: 1rem;--padding-bottom: 1rem;--border-color: #666;--color: #666}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.header-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out .1s both}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:.5rem}.form-container[_ngcontent-%COMP%]{padding:1.5rem}.photo-preview[_ngcontent-%COMP%]{width:100px;height:100px}}@media (max-width: 480px){.header-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}.header-section[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:.9rem}.form-container[_ngcontent-%COMP%]{padding:1rem}}"]})}}return i})();export{ze as AddUserPage};
